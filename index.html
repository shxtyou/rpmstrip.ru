<script>
  const servicePrices = {
    "–°—Ç–∞–Ω–¥–∞—Ä—Ç (1 —á–∞—Å)": 40000,
    "–ú–∏–Ω–µ—Ç": 25000,
    "–ñ–µ–Ω—Å–∫–æ–µ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ": 38000,
    "–ü–æ–¥—á–∏–Ω–µ–Ω–∏–µ": 80000,
    "–®–∏–±–∞—Ä–∏": 20000,
    "BDSM": 40000,
    "–°—Ç—Ä–∏–ø—Ç–∏–∑ / –ü—Ä–∏–≤–∞—Ç-—Ç–∞–Ω–µ—Ü": 10000,
    "–°–æ–≤–º–µ—Å—Ç–Ω–∞—è –≤–∞–Ω–Ω–∞ + –º–∞—Å—Å–∞–∂": 25000,
    "–ù–æ—á—å —Å–æ –º–Ω–æ–π": 100000,
    "–§–æ—Ç–æ-/–≤–∏–¥–µ–æ—Å—ä—ë–º–∫–∞ + —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ": 80000,
    "VIP –ö–ª–∏–µ–Ω—Ç": 200000
  };

  const orderForm = document.getElementById('orderForm');
  const serviceSelect = document.getElementById('service');
  const promoInput = document.getElementById('promo');
  const priceDisplay = document.getElementById('priceDisplay');

  function updatePrice() {
    const selectedService = serviceSelect.value;
    const basePrice = servicePrices[selectedService] || 0;
    const promo = promoInput.value.trim();
    let finalPrice = basePrice;
    let promoText = '';

    if (promo === "ONYX-2025-ELITE-XR") {
      finalPrice = basePrice * 0.9;
      promoText = ' (—Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–º–æ–∫–æ–¥–∞ -10%)';
    }

    priceDisplay.textContent = `–¶–µ–Ω–∞: ${finalPrice.toLocaleString()}$` + promoText;
  }

  serviceSelect.addEventListener('change', updatePrice);
  promoInput.addEventListener('input', updatePrice);

  orderForm.addEventListener('submit', async function (e) {
    e.preventDefault();
    const data = new FormData(orderForm);

    const promo = data.get("promo").trim();
    const service = data.get("service");
    const basePrice = servicePrices[service] || 0;
    let finalPrice = basePrice;
    let discountMsg = '';

    if (promo === "ONYX-2025-ELITE-XR") {
      finalPrice = Math.floor(basePrice * 0.9);
      discountMsg = '\nüí∏ –°–∫–∏–¥–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É';
    }

    await fetch("https://discord.com/api/webhooks/1377196690099933279/o4XKVX179xTD6IV9FIG-kRg9w_t8XDlBG_xewTh2uRVLJfxvgzUpJtS6rFwOw5eXSID1", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        content: "<@&1371644238349205535>",
        embeds: [
          {
            title: "‚ú® –ù–æ–≤—ã–π –∑–∞–∫–∞–∑ –≤ RPM –°—Ç—Ä–∏–ø-–∫–ª—É–±–µ",
            color: 0x9b59b6,
            fields: [
              {
                name: "üí¨ Discord",
                value: data.get("discord"),
                inline: true
              },
              {
                name: "üïπÔ∏è RPM –Ω–∏–∫",
                value: data.get("rpm"),
                inline: true
              },
              {
                name: "üì¶ –£—Å–ª—É–≥–∞",
                value: service,
                inline: false
              },
              {
                name: "üïí –í—Ä–µ–º—è",
                value: data.get("date"),
                inline: true
              },
              {
                name: "üí∞ –¶–µ–Ω–∞",
                value: `${finalPrice.toLocaleString()}$${discountMsg}`,
                inline: true
              }
            ],
            footer: {
              text: "RPM Strip Bot ‚Ä¢ –ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω",
              icon_url: "https://i.imgur.com/L6X3S1v.png"
            },
            timestamp: new Date().toISOString()
          }
        ],
        allowed_mentions: {
          roles: ["1371644238349205535"]
        }
      })
    });

    alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ Discord.");
  });

  updatePrice();
</script>
